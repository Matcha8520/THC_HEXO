<% if (site.posts && site.posts.length > 0) { %>
  <section class="post-list">
    <% if (!page.prev) { %>
      <% if (is_home()) { %>
        <%
          // ç”¨äºŽåŽ»é‡ï¼šè®°å½•å·²æ¸²æŸ“çš„å¾€æœŸä¸€è§ˆé¡µé¢ path
          var renderedMagazinePath = null;
        %>
      <!-- ðŸŒŸ æœ€é«˜ä¼˜å…ˆçº§ï¼šå¾€æœŸä¸€è§ˆå…¥å£ï¼ˆå’Œé¦–é¡µæ–‡ç« æ ·å¼ä¿æŒä¸€è‡´ï¼‰ -->
      <% site.pages.each(function(page) { %>
        <% if (page.group === 'magazine' && page.show_on_home) { %>
          <% var postData = {
            post: page,
            is_index: true,
            index_cover: page.headimg,
            index_title: page.title,
            index_excerpt: page.description || 'ç‚¹å‡»æŸ¥çœ‹æ‰€æœ‰å¾€æœŸå†…å®¹'
          }; %>

          <div class="post-wrapper magazine-entry">
            <%- partial('_partial/post', postData) %>
          </div>

        <% } %>
      <% }) %>


        <!-- é¦–é¡µï¼šç½®é¡¶çš„ pagesï¼ˆæŽ’é™¤ magazine + å·²æ¸²æŸ“é¡¹ï¼‰ -->
        <% site.pages.each(function(post) { %>
          <% if (post.pin && post.path !== renderedMagazinePath) { %>
            <% if ((typeof post.group === 'undefined' || post.group !== 'magazine') && (page.group == undefined || post.group == page.group)) { %>
              <div class='post-wrapper'>
                <%- partial('post', { post: post }) %>
              </div>
            <% } %>
          <% } %>
        <% }) %>

        <!-- é¦–é¡µï¼šç½®é¡¶çš„ postsï¼ˆæŽ’é™¤ magazine + å·²æ¸²æŸ“é¡¹ï¼‰ -->
        <% site.posts.sort('date', -1).each(function(post) { %>
          <% if (post.pin && post.path !== renderedMagazinePath) { %>
            <% if ((typeof post.group === 'undefined' || post.group !== 'magazine') && (page.group == undefined || post.group == page.group)) { %>
              <div class='post-wrapper'>
                <%- partial('post', { post: post }) %>
              </div>
            <% } %>
          <% } %>
        <% }) %>

        <!-- é¦–é¡µï¼šæ™®é€šæ–‡ç« ï¼ˆéžç½®é¡¶ï¼ŒæŽ’é™¤ magazine + å·²æ¸²æŸ“é¡¹ï¼‰ -->
        <% if (page.posts && page.posts.length > 0) { %>
          <% page.posts.each(function(post) { %>
            <% if (!post.pin && post.path !== renderedMagazinePath) { %>
              <% if (typeof post.group === 'undefined' || post.group !== 'magazine') { %>
                <div class='post-wrapper'>
                  <%- partial('post', { post: post }) %>
                </div>
              <% } %>
            <% } %>
          <% }) %>
        <% } %>

      <% } else if (page.posts && page.posts.length > 0) { %>
        <!-- éžé¦–é¡µï¼šç½®é¡¶ postsï¼ˆä¸è¿‡æ»¤ groupï¼‰ -->
        <% page.posts.each(function(post) { %>
          <% if (post.pin) { %>
            <div class='post-wrapper'>
              <%- partial('post', { post: post }) %>
            </div>
          <% } %>
        <% }) %>
      <% } %>
    <% } %>

    <!-- éžé¦–é¡µ or é¦–é¡µå‰©ä½™å†…å®¹ï¼šæ™®é€šæ–‡ç«  -->
    <% if (page.posts && page.posts.length > 0) { %>
      <% page.posts.each(function(post) { %>
        <% if (!post.pin) { %>
          <% if (!is_home() || (typeof post.group === 'undefined' || post.group !== 'magazine')) { %>
            <div class='post-wrapper'>
              <%- partial('post', { post: post }) %>
            </div>
          <% } %>
        <% } %>
      <% }) %>
    <% } %>
  </section>

  <!-- åˆ†é¡µ -->
  <% if (page && page.posts) { %>
    <% if (page.total > 1) { %>
      <br>
      <div class="prev-next">
        <% if (page.prev != 0) { %>
          <a class="prev" rel="prev" href="<%= url_for(page.prev_link) %>">
            <section class="post prev white-box <%- theme.custom_css.body.effect.join(' ') %>" >
              <i class="fa-solid fa-chevron-left" aria-hidden="true"></i>&nbsp;<%- __('post.prev_page') %>&nbsp;
            </section>
          </a>
        <% } %>
        <p class="current">
          <%= page.current%> / <%= page.total%>
        </p>
        <% if (page.next != 0) { %>
          <a class="next" rel="next" href="<%= url_for(page.next_link) %>">
            <section class="post next white-box <%- theme.custom_css.body.effect.join(' ') %>">
              &nbsp;<%- __('post.next_page') %>&nbsp;<i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
            </section>
          </a>
        <% } %>
      </div>
    <% } %>
  <% } %>
<% } %>